<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="This website is developed to identify the safety of URLs.">
  <meta name="keywords" content="phishing url,phishing,cyber security,machine learning,classifier,python">
  <meta name="author" content="TEAM AI ACES">

  <!-- BootStrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    crossorigin="anonymous">
        
  <link href="../static/styles.css" rel="stylesheet">
  <title>URL detection</title>

  <style>
    .verdict-legit { color: #28a745; font-weight: bold; }
    .verdict-phish { color: #dc3545; font-weight: bold; }
    .verdict-uncertain { color: #ffc107; font-weight: bold; }
  </style>
</head>

<body>
<div class="container">
  <div class="row">
    <div class="form col-md" id="form1">
      <h2>PHISHING URL DETECTION</h2>
      <br>
      <form action="/" method="post">
        <input type="text" class="form__input" name="url" id="url" placeholder="Enter URL" required />
        <label for="url" class="form__label">URL</label>
        <button class="button" role="button">Check here</button>
      </form>
    </div>
    
    <div class="col-md" id="form2">
      {% if url %}
        <br>
        <h6 class="right"><a href="{{ url }}" target="_blank">{{ url }}</a></h6>
        <br>
        <!-- ================= Analysis Results ================= -->
        <div class="card p-3 bg-dark text-white rounded">
          <h3>Analysis Results</h3>
          <hr style="border-color: #aaa;">

          <!-- ML Verdict -->
          <p>
            <b>ML Model Verdict:</b> 
            <span class="
              {% if ml_verdict == 'LEGITIMATE' %} verdict-legit 
              {% elif ml_verdict == 'PHISHING' %} verdict-phish 
              {% else %} verdict-uncertain {% endif %}">
              {{ ml_verdict }}
            </span>
            (Confidence: {{ (ml_conf*100)|round(2) }}%)
          </p>

          <!-- Gemini Verdict -->
          <p>
            <b>Gemini LLM Verdict using Prompt Tuning:</b> 
            <span class="
              {% if llm_verdict == 'legitimate' %} verdict-legit 
              {% elif llm_verdict == 'phishing' %} verdict-phish 
              {% else %} verdict-uncertain {% endif %}">
              {{ llm_verdict|upper }}
            </span>
            (Confidence: {{ (llm_conf*100)|round(2) }}%)
          </p>

          <!-- Combined Risk Score -->
          <p>
            <b>Final Phishing Risk Verdict:</b> 
            <span class="
              {% if final_verdict == 'LEGITIMATE' %} verdict-legit 
              {% elif final_verdict == 'PHISHING' %} verdict-phish 
              {% else %} verdict-uncertain {% endif %}">
              {{ final_verdict }}
            </span>
            (Risk Score: {{ (combined_risk_score*100)|round(2) }}%)
          </p>

          <!-- ML Feature Contribution -->
          <p><b>ML Feature Contribution:</b></p>
          <img src="data:image/png;base64,{{ ml_feature_plot }}" alt="ML Feature Contribution" class="img-fluid">

          
          <!-- Reasons -->
          <p><b>Reasons:</b></p>
          <ul>
            {% for reason in llm_reasons %}
              <li>{{ reason }}</li>
            {% endfor %}
          </ul>

          <!-- Target Brand -->
          {% if target_brand %}
            <p><b>Target Brand:</b> {{ target_brand }}</p>
          {% endif %}
        </div>
        <!-- ===================================================== -->

        <br>
        {% if ml_verdict == "LEGITIMATE" %}
          <button class="button1" id="button1" role="button" onclick="window.open('{{url}}')" target="_blank">Continue</button>
        {% else %}
          <button class="button2" id="button2" role="button" onclick="window.open('{{url}}')" target="_blank">Still want to Continue</button>
        {% endif %}
      {% endif %}
    </div>
  </div>
  <br>
  <p>Â©2025 TEAM AI ACES</p>
</div>

<!-- JavaScript -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
</body>
</html>
